<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.4.0/dist/tf.min.js"></script>
  <title>Document</title>
  <script>
    const modelUrl = 'https://tfhub.dev/tensorflow/tfjs-model/deeplabv3/1/default/1';
    let model;

    async function loadModel() {
      model = await tf.loadGraphModel(modelUrl, {fromTFHub: true});
    }

    loadModel();
    const webcam = new Webcam(document.getElementById('webcam'));
const segmentationCanvas = document.getElementById('segmentation');
const segmentationCtx = segmentationCanvas.getContext('2d');

async function segmentPeople(img) {
  const segmentation = await model.segmentPeople(img, {
    internalResolution: 'medium',
    segmentationThreshold: 0.7
  });
  return segmentation;
}

async function segmentImage() {
  const img = await webcam.capture();
  const segmentation = await segmentPeople(img);
  segmentationCtx.drawImage(img, 0, 0);
  segmentationCtx.globalAlpha = 0.7;
  segmentationCtx.drawImage(segmentation, 0, 0);
}

webcam.start();
setInterval(segmentImage, 200);
  </script>
</head>
<body>
  <video id="webcam"></video>
  <canvas id="segmentation"></canvas>
</body>
</html>